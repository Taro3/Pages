# ログインUI-パート1

ウィザードを使って、テキストラベル、プッシュボタン、ロゴを含むシンプルなUIを作成する方法を説明します。

![image](https://doc.qt.io/qtdesignstudio/images/loginui1.png)

ログインUIパート1は、Qt Design Studioをしようしてページ、ボタン、フィールドなどの基本的なUIコンポーネントを使用してシンプルなUIを作成する方法を説明する一連の例の第1回目です。パート1では、Qt Design Studioのウィザードを使用して、Qt QuickプロジェクトとボタンUIコントロールを作成する方法と、ウィザードで生成されたファイルを変更して独自のUIをデザインする方法について説明します。

Qt Quick を学ぶセクションでは、ウィザードが実行するタスクやQMLとQt Quickの基本についての追加情報を提供しています。

## UIプロジェクトの作成

この例では、提供されている最もシンプルなウィザードを使用します。ウィザードは、モバイル・プラットフォームやランチャー・アプリケーション用に最適化された UI を作成するためにも利用できます。 利用できるオプションの詳細については、「[プロジェクトの作成](https://doc.qt.io/qtdesignstudio/studio-projects.html)」を参照してください。

プロジェクトを作成するには

1. ファイル＞新規ファイルまたはプロジェクト＞一般＞Qtクイックアプリケーション-空＞選択を選択します。
2. 名前フィールドにloginui1と入力します。
3. Create inフィールドに、プロジェクトファイルのパスを入力します。 次へ（またはmacOSの場合はContinue）を選択して、Define Project Detailsページに進みます。
4. 画面解像度フィールドで、640 x 480を選択します。
5. Finish（macOSの場合はDone）を選択してプロジェクトを作成します。
6. プロジェクトはデザインモードでこのように表示されます。

![2](https://doc.qt.io/qtdesignstudio/images/loginui1-project.png)

UIは、背景を形成するレクタングル型のQML型と、一部のテキストを表示するテキスト型を用いて構築されています。

***

## Qt Quick を学ぶ - プロジェクトとファイル

Qt Design Studio は、Qt Quick と QML を使用して UI を作成するために必要なボイラプレートファイルとフォルダのセットを作成します。これらのファイルは、[プロジェクト] ビューに表示されます。詳細については、「プロジェクト ファイルの表示」を参照してください。

![Project](https://doc.qt.io/qtdesignstudio/images/loginui1-project-files.png);

* loginui1.qmlプロジェクトファイルは、プロジェクトフォルダ内のすべてのQML、JavaScript、画像ファイルがプロジェクトに属することを定義しています。そのため、プロジェクトに新しいファイルを追加する際に、個別にリストアップする必要はありません。
* loginui1.qmlファイルは、UIの機能を定義します。当面の間は何もしません。
* Screen01.ui.qml ファイルは、UI の外観を定義します。詳細については、「Qt Quick UI Forms」を参照してください。
* qtquickcontrols2.conf ファイルは、選択した UI スタイルといくつかのスタイル固有の引数を指定します。
* インポート フォルダには、Arial フォント用のフォント ローダを指定する Constants.qml ファイルと、定数 QML タイプを宣言する qmldir モジュール定義ファイルがあります。詳細については、モジュール定義 qmldir ファイルを参照してください。さらに、QtQuick サブフォルダには、Studio コンポーネントとエフェクト QML タイプが含まれています。このサブフォルダは、この例では使用していないので、今のところ無視しても構いません。

QMLファイルは、可読性の高い構造化されたレイアウトでオブジェクトの階層を定義します。すべてのQMLファイルは、インポートセクションとオブジェクト宣言セクションの2つの部分から構成されています。UIに最も一般的なQMLの型と機能は、QtQuickインポートで提供されています。ui.qml ファイルの QML コードは、テキスト エディタ ビューで確認できます。

ゼロからQMLファイルを作成する方法の詳細については、「QMLを使った最初の一歩」を参照してください。

次にUI要素のプロパティを編集して、UIのメインページを作成します。

***

## メインページの作成

これで、Rectangleタイプのプロパティを変更してUIの背景を白くし、Textタイプのプロパティを変更してテキストを変更し、フォントサイズを大きくすることができます。さらに、Imageタイプを使ってQtのロゴをページに追加します。

UI に加えた変更をプレビューするには、フォームエディタビューツールバーの (ライブプレビューを表示する) ボタンを選択するか、Alt+P キーを押します。

ウィザードが作成した Screen01.ui.qml ファイルは、デザインモードで開いている必要があります。開いていない場合は、プロジェクト ビューでダブルクリックして開くことができます。

注釈: ビューの可視性は、選択したワークスペースによって異なります。ビューの表示は、選択したワークスペースによって異なります。非表示のビューを開くには、デザイン モードで [ウィンドウ] > [ビュー] を選択します。詳細については、「ワークスペースの管理」を参照してください。

フォームエディタで Screen01.ui.qml を変更するには、以下の手順に従います。

1. ナビゲータビューで矩形を選択し、プロパティビューにそのプロパティを表示します。
2. カラーフィールドで (アクション) メニューを選択し、リセット を選択して矩形の背景をデフォルトの色である白にリセットします。
3. ナビゲータでテキストを選択します。
4. idフィールドで、そのidをpageTitleに変更します。
5. テキスト」フィールドに「Qt Account」と入力します。
6. フォント]グループの[サイズ]フィールドで、フォントサイズを24ピクセルに設定します。
7. ライブラリ] > [QMLタイプ] > [Qt Quick Basic]からイメージタイプを長方形の左上隅にドラッグ＆ドロップします。
8. idフィールドで、そのidをlogoに変更します。
9. ソースフィールドで、（参照）ボタンを選択して、Qtロゴ画像ファイルを探します。ここをクリックすると、Qtロゴをブラウザで開き、プロジェクトを作成したフォルダにファイルとして保存することができます。画像は装飾用にしか使わないので、他の画像を使ってもいいですし、そのままにしておいても構いません。
10. ファイル＞保存を選択するか、Ctrl+Sを押して変更内容を保存します。

これで、デザイン モードとライブ プレビューでは、UI は次のように表示されるはずです。

![preview](https://doc.qt.io/qtdesignstudio/images/loginui1-main-page.png)

***

## Qt Quick を学ぶ - QML の型

Qt Quick モジュールは、UI の作成に必要な基本的な型をすべて提供します。ビジュアル キャンバスを提供し、ビジュアル コンポーネントの作成やアニメーション、ユーザー入力の受信、データ モデルやビューの作成のための型が含まれています。

Qt Quick 型の機能を使用できるようにするために、ウィザードは作成する QML ファイルに以下のインポート ステートメントを追加します。

```QML
import QtQuick 2.10
import loginui1 1.0
```

ライブラリビューには、Qt Design Studioでサポートされている各QtモジュールのQML型が一覧表示されます。基本的なタイプを使用して独自の QML タイプを作成することができ、それらは [My QML Components] タブに表示されます。このタブは、カスタム QML コンポーネントを作成した場合にのみ表示されます。この例で使用した矩形と画像の型の詳細については、「ユースケース - QML での視覚的要素」を参照してください。すべての QML タイプの説明については、Qt リファレンス ドキュメントの「すべての QML タイプ」を参照してください。

***

## プッシュボタンの作成

別のウィザードを使用してプッシュボタンを作成し、プロジェクトに追加することができます。このウィザードでは、再利用可能なボタン・コンポーネントが作成され、ライブラリの「マイ QML コンポーネント」タブに表示されます。これをフォームエディタにドラッグ＆ドロップし、プロパティビューでプロパティを変更して、外観や機能を変更することができます。

ウィザードを使用しても希望の種類の押しボタンを作成できない場合は、基本的な QML 型を使用してゼロからボタンを作成することができます。詳細については、「ボタンの作成」と「拡張可能なボタンとボーダーの作成」を参照してください。

プッシュボタンを作成するには、以下の手順に従います。

1. ファイル] > [新規ファイルまたはプロジェクト] > [ファイルとクラス] > [Qt クイック コントロール] > [カスタム ボタン] > [選択] を選択します。
2. コンポーネント名フィールドに PushButton と入力します。
3. 完了（macOSの場合は完了）を選択してボタンを作成します。

これで、デザインモードではボタンはこのようになっているはずです。

![PushButton](https://doc.qt.io/qtdesignstudio/images/loginui1-button.png)

***

## Qtクイックを学ぶ - Qtクイックコントロール

Custom Button ウィザードは、Qt Quick Controls 2 モジュールに属する Button QML タイプを作成します。これは、ユーザーが押したり、クリックしたりすることができるプッシュボタンコントロールです。ボタンは通常、アクションを実行したり、質問に答えたりするために使用されます。Button型は、別のQML型からプロパティや機能を継承しています。これにより、テキストの設定、アイコンの表示、マウスのクリックに対する反応などが可能になります。

ボタン型の機能を利用できるようにするために、ウィザードは以下のインポート文を PushButton.ui.qml ファイルに追加します。

```QML
import QtQuick 2.10
import QtQuick.Templates 2.1 as T
import loginui1 1.0
```

Qt Quick Templates 2 モジュールは Button タイプの機能を提供します。このモジュールは T としてインポートされ、同じ名前の他のタイプではなく、Qt Quick Controls 2 モジュールの Button タイプが使用されていることを示すために、Button タイプの定義にエイリアスが追加されます。

```QML
T.Button {
    id: control

    text: qsTr("MyButton")
    ...
    background: Rectangle {
        id: buttonBackground
        color: "#41cd52"
        radius: 6
        implicitWidth: 100
        implicitHeight: 40
        opacity: enabled ? 1 : 0.3
        border.width: 1
        border.color: "#21be2b"
    }
    ...
```

次に、プロパティを変更してボタンの外観を変更します。

***

## ボタンのスタイリング

これで、PushButton タイプのプロパティをお好みに合わせて変更することができます。変更をすべてのボタンインスタンスに適用するには、PushButton.ui.qml ファイルに変更を加える必要があります。

ウィザードでは、プロジェクト内のすべての UI ファイルにマスタースタイルがすでに設定されているため、ボタンの背景プロパティはプロパティ ビューには表示されません。ツールバーのマスターメニュー(1)で選択することでアクセスできます。

![Master menuy](https://doc.qt.io/qtdesignstudio/images/loginui1-toolbar.png)

ボタンのプロパティを変更するには

1. ツールバーのマスター > ボタン背景を選択して、ボタン背景コンポーネントに移動します。
2. フォームエディタまたはナビゲータでボタンの背景を選択し、プロパティビューにそのプロパティを表示します。
3. カラーフィールドで、(Actions) > Set Binding を選択し、ボタンの背景色を #41cd52 に設定します。
4. Enterキーを押すか、エディタの下部にあるチェックボタンを選択して新しい値を保存します。
![Binding Editor](https://doc.qt.io/qtdesignstudio/images/loginui1-binding-editor.png)
5. 境界線の色]フィールドで、ボタンの境界線の色を#21be2bに設定します。また、カラーピッカーを使ってボタンの色を変更することもできます。
6. 半径フィールドで、ボタンの角を丸くするために6を入力します。
7. Master > textItem を選択し、ボタンのテキスト色を白 (#ffffffff) に設定します。
8. File > Save を選択するか、Ctrl+S を押して変更を保存します。

フォームエディタでトップレベルの PushButton タイプに戻るには、ブレッドクラムバー（1）の PushButton.ui.qml を選択します。

![Form Editor](https://doc.qt.io/qtdesignstudio/images/loginui1-breadcrumb-bar.png)

ボタンはこのようになっているはずです。

![ボタン](https://doc.qt.io/qtdesignstudio/images/loginui1-button-styled.png)

***

## Qt Quick を学ぶ - プロパティバインディング

オブジェクトのプロパティには静的な値を割り当てることができ、明示的に新しい値が割り当てられるまで一定の値を維持します。この例では、バインディングエディタで設定した色の値は静的なものです。

しかし、QMLの持つ動的なオブジェクトの振る舞いを最大限に活用するためには、異なるオブジェクトのプロパティ間の関係を指定するプロパティバインディングを使用することができます。プロパティの依存関係の値が変わると、そのプロパティは指定した関係に従って自動的に更新されます。

裏では、QMLエンジンがプロパティの依存関係（バインディング式の変数）を監視しています。変更を検出すると、バインディング式を再評価し、新しい結果をプロパティに適用します。

詳細については、「プロパティのバインディング」を参照してください。

次に、メイン UI QML ファイル Screen01.ui.qml の PushButton タイプを使用して、ボタンの 2 つのインスタンスを UI に追加し、それらのテキスト ラベルを変更します。

***

## UIにボタンを追加する

2 つのボタンインスタンスを UI に追加し、ラベルを変更します。

1. プロジェクトビューの Screen01.ui.qml をダブルクリックしてフォームエディタで開きます。
2. ライブラリから PushButton タイプの 2 つのインスタンスをフォームエディタにドラッグ＆ドロップします。
![PushButton](https://doc.qt.io/qtdesignstudio/images/loginui1-library.png)
3. ナビゲータでボタンを1つ選択して、プロパティ ビューの ID とテキスト ラベルを変更します。
4. ID フィールドに loginButton と入力します。
5. テキスト］フィールドに［ログイン］と入力し、［tr］を選択してテキストを翻訳可能にマークします。
6. もう一方のボタンを選択し、その ID を registerButton に、テキスト ラベルを Create Account に変更します。ここでもテキストを翻訳可能にマークします。
7. 要素を選択すると、その角と側面に選択ハンドルが表示されます。選択ハンドルを使ってボタンのサイズを変更し、テキストがボタンの背景に収まるようにします。この例では、ボタンの幅は120ピクセルに設定されています。
8. 選択したボタンの上にカーソルを移動すると、選択アイコンが表示されます。これでボタンをフォームエディタの別の位置にドラッグすることができます。ガイドラインを使ってページタイトルの下にボタンを配置してください。
![Preview](https://doc.qt.io/qtdesignstudio/images/loginui1-align-buttons.png)
9. ファイル] > [保存] を選択するか、Ctrl+S キーを押して変更内容を保存します。

これでUIの最初のイテレーションの準備ができ、デザインモードとライブプレビューでは以下のように表示されます。

![Preview](https://doc.qt.io/qtdesignstudio/images/loginui1-ready.png)

***

## Qt Quick を学ぶ - QML ID

QML 型及び QML 型の各インスタンスには、その型を一意に識別し、他のオブジェクトのプロパティとの結合を可能にする id が付与される。id は一意でなければならず、頭文字は小文字かアンダースコアでなければならず、文字、数字、アンダースコアのみを含むことができる。

詳細については、id 属性を参照してください。

***

## 次のステップ

UI コントロールを追加し、アンカーやレイアウトを使用してページ上に配置して UI を拡張可能にする方法については、シリーズの次の例「Log In UI - パート 2」を参照してください。

メニュー ボタンを作成し、それを使用してボタン バーを構築するより高度な例については、「サイド メニュー」を参照してください。

***
**[戻る](Tutorials.html)**
